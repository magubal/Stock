---
description: 터미널 명령어 실행 직후 성공/실패 여부를 무조건 확인하도록 제한하는 워크플로우
---
# /terminal_result_check 워크플로우

사용자가 프롬프트에 `/terminal_result_check`를 지정하여 지시했을 경우, AI는 현재 작업을 수행하는 내내 **모든 터미널 명령어(`run_command`) 직후에 예외 없이 즉각적인 확인 절차를 밟아야 합니다.**

## 핵심 지침 (Critical Directives)

이 워크플로우가 활성화되면(다른 스킬(예: `/brain`)과 동시에 호출된 경우에도 동일하게 적용) AI는 터미널 사용 중 다음의 **강제 규칙 3가지**를 무조건 지켜야 합니다.

**1. 동기적 대기 유도 (WaitMsBeforeAsync)**
명령어 실행 시, 즉각적인 백그라운드 전환을 방지하기 위해 서버 구동 목적이 아닌 한 `WaitMsBeforeAsync`를 최소 5000ms 이상 할당하여 명령어가 동기적으로 끝나도록 우선 유도합니다.

**2. 실행 즉시 상태 및 결과 확인 (최중요)**
`run_command` 도구를 호출했다면, **절대로 독단적으로 다음 파일 쓰기/편집 도구로 넘어가서는 안 됩니다.**
명령어 호출 직후엔 무조건 `command_status` 도구를 다시 호출하여, 해당 명령어의 실행이 정상적으로 완료되었는지, 에러가 발생했는지, 아니면 무한 루프(Hang) 상태에 빠졌는지 직접 눈으로 확인합니다. 결과 확인 전 다른 액션은 절대 불가합니다.

**3. 에러 발생 시 진행 중단 (Fail-Fast) 및 유틸리티 활용**
`command_status` 확인 결과 에러나 Hang 상태가 감지된다면:
- 혼자서 임의로 코드를 수정해 무한 재시도하지 않습니다.
- 즉각적으로 하던 행동을 멈추고 사용자에게 현재 에러 상태와 메시지를 보고하며 대기 상태로 들어갑니다.
- **예외적 허용 (포트 충돌/좀비 프로세스 정리)**: 만약 에러의 원인이 `uvicorn` 등 서버 재시작 시 발생하는 '포트 이미 사용 중(Address already in use)' 또는 '액세스 거부(Access Denied)' 등의 문제라면, 다음의 복구 절차를 스스로 1회 시도합니다.
  1. `run_command` 도구를 사용합니다.
  2. `Cwd` 파라미터를 프로젝트 루트 디렉터리(`F:\PSJ\AntigravityWorkPlace\Stock\Test_02`)로 설정합니다.
  3. `CommandLine` 파라미터에 `python scripts/kill_port.py`를 입력하여 실행합니다.
  4. 명령 실행 후 `command_status`로 좀비 프로세스가 성공적으로 종료(killed PID...)되었는지 확인한 뒤, 서버 재구동을 시도합니다.

---

> [!NOTE] 
> 이 워크플로우는 AI가 복잡한 여러 작업을 연계할 때, 중간 과정(터미널 명령어)에서 발생하는 에러를 묵과하여 프로젝트가 오염되는 것을 원천적으로 차단하기 위한 최상위 '인터럽트(Interrupt)' 제약 사항입니다.
